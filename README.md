# HW3

## Сервисы

### 1. Payments

Сервис для обработки платежей. Он хранит информацию о счетах пользователей. Поддерживает параллельную обработку платежей и транзакций. Реализует REST API и Inbox+Outbox таблицы для работы через очереди сообщений.

#### API
- `GET /account/{accountId}` - Получить информацию о счете пользователя.
- `POST /account` - Создать новый счет.
- `POST /account/deposit` - Пополнить счет.
- `POST /account/withdraw` - Снять деньги со счета.

#### Inbox+Outbox
- Inbox таблица для получения сообщений о заявках на транзакции.
- Outbox таблица для отправки уведомлений о результатах транзакций. Транзакция может иметь 3 состояния результата: `COMPLETED`, `FAILED`, `CANCELLED`.
    - `COMPLETED` - транзакция успешно выполнена.
    - `FAILED` - транзакция не выполнена из-за ошибки(счет не существует).
    - `CANCELLED` - транзакция отменена (например, недостаточно средств на счете).

#### База данных
Используется PostgreSQL. Таблицы:
- `accounts` - хранит информацию о счетах пользователей.
- `inbox` - Inbox таблица для получения сообщений о заявках на транзакции.
- `outbox` - Outbox таблица для отправки уведомлений о результатах транзакций.

#### Репозитории
Репозитории для работы с базой данных:
- `AccountRepository` - для работы с таблицей `accounts`.
- `InboxRepository` - для работы с Inbox таблицей.
- `OutboxRepository` - для работы с Outbox таблицей.

#### Сервисы
Сервисы для обработки бизнес-логики:
- `AccountService` - для работы с счетами пользователей.
- `InboxService` - для обработки сообщений из Inbox таблицы.

